#!/bin/bash

cat <<EOF > $HOME/.gitconfig
# This gitconfig was generated via ~/.bin/generate_gitconfig.
# Edit that file, not this one!

[user]
	name = Dave Yarwood
	email = dave.yarwood@gmail.com
[push]
	default = simple
[core]
	autocrlf = input
	editor = nvim
	excludesfile = $HOME/.gitignore_global
[rerere]
	enabled = true
EOF

if [[ "$(uname)" == Darwin ]]; then
  CREDENTIAL_HELPER="osxkeychain"
elif [[ -n "$(which gnome-keyring-daemon)" ]]; then
  CREDENTIAL_HELPER="/usr/share/doc/git/contrib/credential/gnome-keyring/git-credential-gnome-keyring"
fi

if [[ -n "$CREDENTIAL_HELPER" ]]; then
  cat <<EOF >> $HOME/.gitconfig
[credential]
  helper = $CREDENTIAL_HELPER
EOF
fi

